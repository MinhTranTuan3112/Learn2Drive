@using System.Globalization;
@model Driving_License.Models.Vehicle;
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=<div class=" modal-content" role="document">
    <!--bootstrap css file-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <!--font css file-->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@300&display=swap" rel="stylesheet">
    <!--custom css file-->
    <link rel="stylesheet" href="/css/styleRent.css">
    <title>RentDetail</title>
</head>

<body>
    <div class="modal-body" style="margin-top:100px">
        <div class="detail-car">
            <div class="cover-car-modal">
                <div class="m-container">
                    <div class="cover-car-container">
                        <div class="cover-car-item">
                            <img loading="lazy" src="/img/vehicle/@Model.Image" />
                        </div>
                    </div>
                    <div class="sub-img">
                        <div class="cover-car-item">
                            <div class="main-img">
                                <img loading="lazy"
                                    src="https://cdn-img-v2.webbnc.net/uploadv2/web/89/8958/product/2023/02/20/03/50/1676862274_2.jpg?v=4"
                                    alt="Cho thuê xe tự lái" />
                            </div>
                            <div class="cover-car-item">
                                <img loading="lazy"
                                    src="https://cdn-img-v2.webbnc.net/uploadv2/web/89/8958/product/2023/02/20/03/50/1676862277_3.jpg?v=4"
                                    alt="Cho thuê xe tự lái">
                            </div>
                            <div class="cover-car-item">
                                <img loading="lazy"
                                    src="https://cdn-img-v2.webbnc.net/uploadv2/web/89/8958/product/2023/02/20/03/50/1676862280_4.jpg?v=4"
                                    alt="Cho thuê xe tự lái" />
                            </div>
                        </div>
                        <div class="see-more-img">
                            <div class="wrap-svg">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <path
                                        d="M18.7104 21.2499H8.48044C7.08044 21.2499 5.94043 20.1099 5.94043 18.7099V8.47995C5.94043 7.07995 7.08044 5.93994 8.48044 5.93994H18.7104C20.1104 5.93994 21.2504 7.07995 21.2504 8.47995V18.7099C21.2504 20.1099 20.1104 21.2499 18.7104 21.2499Z"
                                        stroke="#242420" stroke-width="1.5" stroke-linecap="round"
                                        stroke-linejoin="round"></path>
                                    <path
                                        d="M3.48999 17.32C3.02999 16.86 2.75 16.22 2.75 15.52V5.29001C2.75 3.89001 3.89001 2.75 5.29001 2.75H15.52C16.31 2.75 17.02 3.10999 17.49 3.67999"
                                        stroke="#242420" stroke-width="1.5" stroke-linecap="round"
                                        stroke-linejoin="round"></path>
                                    <path
                                        d="M5.94043 18.1001L8.87042 15.1701C9.37042 14.6701 10.1804 14.6701 10.6704 15.1701L11.4204 15.9201C11.9204 16.4201 12.7304 16.4201 13.2204 15.9201L16.5204 12.6201C17.0204 12.1201 17.8304 12.1201 18.3204 12.6201L21.2504 15.5501"
                                        stroke="#242420" stroke-width="1.5" stroke-linecap="round"
                                        stroke-linejoin="round"></path>
                                    <path
                                        d="M10.4095 8.41992C9.63955 8.41992 9.01953 9.03991 9.01953 9.80991C9.01953 10.5799 9.63955 11.1999 10.4095 11.1999C11.1795 11.1999 11.7995 10.5799 11.7995 9.80991C11.7995 9.03991 11.1695 8.41992 10.4095 8.41992Z"
                                        fill="#242420"></path>
                                </svg>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="m-container" style="margin-bottom:650px;">
                <div class="detail-container">
                    <div class="content-detail">
                        <div class="info-car-basic">
                            <div class="group-name">
                                <h3>@Model.Name</h3>
                                <div class="group-action d-flex-center-btw">
                                    <div class="back d-flex-center"></div>
                                </div>
                            </div>
                            <div class="group-total">
                                <div class="wrap-svg">
                                    <svg class="star-rating" width="16" height="17" viewBox="0 0 16 17" fill="none"
                                        xmlns="http://www.w3.org/2000/svg">
                                        <path
                                            d="M14.6667 7.23331C14.7333 6.89998 14.4667 6.49998 14.1333 6.49998L10.3333 5.96665L8.59999 2.49998C8.53333 2.36665 8.46666 2.29998 8.33333 2.23331C7.99999 2.03331 7.59999 2.16665 7.39999 2.49998L5.73333 5.96665L1.93333 6.49998C1.73333 6.49998 1.59999 6.56665 1.53333 6.69998C1.26666 6.96665 1.26666 7.36665 1.53333 7.63331L4.26666 10.3L3.59999 14.1C3.59999 14.2333 3.59999 14.3666 3.66666 14.5C3.86666 14.8333 4.26666 14.9666 4.59999 14.7666L7.99999 12.9666L11.4 14.7666C11.4667 14.8333 11.6 14.8333 11.7333 14.8333C11.8 14.8333 11.8 14.8333 11.8667 14.8333C12.2 14.7666 12.4667 14.4333 12.4 14.0333L11.7333 10.2333L14.4667 7.56665C14.6 7.49998 14.6667 7.36665 14.6667 7.23331Z"
                                            fill="#FFC634"></path>
                                    </svg>
                                </div>
                                <span class="info">5.0</span><span class="dot">•</span>
                                <div class="wrap-svg">
                                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none"
                                        xmlns="http://www.w3.org/2000/svg" style="margin-right: 4px;">
                                        <g clip-path="url(#clip0_1087_41996)">
                                            <path
                                                d="M10.0625 1.21875C10.0625 1.06369 10.1887 0.9375 10.3438 0.9375H11.9688C12.1238 0.9375 12.25 1.06369 12.25 1.21875V2.89422H13.1875V1.21875C13.1875 0.546719 12.6408 0 11.9688 0H10.3438C9.67172 0 9.125 0.546719 9.125 1.21875V2.89422H10.0625V1.21875Z"
                                                fill="#5FCF86"></path>
                                            <path
                                                d="M5.69806 15.0623C5.49325 14.7441 5.375 14.3673 5.375 13.9686V6.94092H1.09375C0.490656 6.94092 0 7.43157 0 8.03467V13.9686C0 14.5186 0.408156 14.9749 0.9375 15.051V15.5309C0.9375 15.7898 1.14737 15.9997 1.40625 15.9997C1.66513 15.9997 1.875 15.7898 1.875 15.5309V15.0623H5.69806V15.0623ZM1.875 8.65967C1.875 8.40079 2.08487 8.19092 2.34375 8.19092C2.60263 8.19092 2.8125 8.40079 2.8125 8.65967V13.3436C2.8125 13.6024 2.60263 13.8123 2.34375 13.8123C2.08487 13.8123 1.875 13.6024 1.875 13.3436V8.65967Z"
                                                fill="#5FCF86"></path>
                                            <path
                                                d="M4.375 5.26562C4.375 5.11056 4.50119 4.98438 4.65625 4.98438H5.375V4.92547C5.375 4.61094 5.44687 4.31291 5.57506 4.04688H4.65625C3.98422 4.04688 3.4375 4.59359 3.4375 5.26562V6.00359H4.375V5.26562Z"
                                                fill="#5FCF86"></path>
                                            <path
                                                d="M14.9062 3.83154H7.40625C6.80316 3.83154 6.3125 4.3222 6.3125 4.92529V13.9686C6.3125 14.5186 6.72066 14.9749 7.25 15.051V15.5309C7.25 15.7898 7.45987 15.9997 7.71875 15.9997C7.97763 15.9997 8.1875 15.7898 8.1875 15.5309V15.0623H14.125V15.5309C14.125 15.7898 14.3349 15.9997 14.5938 15.9997C14.8526 15.9997 15.0625 15.7898 15.0625 15.5309V15.051C15.5918 14.9749 16 14.5186 16 13.9686V4.92529C16 4.32217 15.5093 3.83154 14.9062 3.83154ZM9.125 13.3436C9.125 13.6024 8.91513 13.8123 8.65625 13.8123C8.39737 13.8123 8.1875 13.6024 8.1875 13.3436V5.55029C8.1875 5.29142 8.39737 5.08154 8.65625 5.08154C8.91513 5.08154 9.125 5.29142 9.125 5.55029V13.3436ZM13.6562 13.8123C13.3974 13.8123 13.1875 13.6024 13.1875 13.3436V5.55029C13.1875 5.29142 13.3974 5.08154 13.6562 5.08154C13.9151 5.08154 14.125 5.29142 14.125 5.55029V13.3436C14.125 13.6024 13.9151 13.8123 13.6562 13.8123Z"
                                                fill="#5FCF86"></path>
                                        </g>
                                        <defs>
                                            <clipPath id="clip0_1087_41996">
                                                <rect width="16" height="16" fill="white"></rect>
                                            </clipPath>
                                        </defs>
                                    </svg>
                                </div>
                            </div>
                        </div>
                    </div>
                    <form action="/Rent/InsertNewRent" method="post" class="rentForm">
                        <div class="sidebar-detail mt-3">
                            <div class="rent-box shadow-lg p-3 mb-5 bg-body-tertiary rounded" id="cardetail"
                                style="position: relative;">
                                <input type="hidden" name="vechicleid" value="@Model.VehicleId" />
                                <label for="party" style="font-weight:bold">Nhập thời gian thuê:</label>
                                <input id="party1" type="datetime-local" class="form-control mb-2 mt-1"
                                    name="partydate" />
                                <input id="party2" type="datetime-local" class="form-control mb-2" name="partydate2" />
                                <div class="dropdown-form">
                                    <button class="btn btn-primary btn--m width-100" type="button"
                                        onclick="calculateTimeDifference()">
                                        Áp Dụng
                                    </button>
                                </div>
                                <div class="dropdown-form ">
                                    <p id="timeDifference"></p>
                                </div>
                                <div class="dropdown-form ">
                                    <label>Địa điểm giao nhận xe</label>
                                    <div class="wrap-form has-arrow"><span class="value"> @Model.Address</span></div>
                                </div>
                                <div class="line-page"></div>
                                <div class="price-container">
                                    <div class="line-page"></div>
                                    <div class="line-page"></div>
                                    <div class="price-item total">
                                        <p>Tổng cộng</p>
                                        <span>
                                            <p id="totalprice" name="totalprice" class="finalcost">0 VNĐ</p>
                                            <input type="hidden" id="totalpriceInput" name="totalpriceInput">
                                        </span>
                                    </div>
                                </div>
                                <button class="btn btn-primary btn--m width-100 submit-btn" type="submit">
                                    CHỌN THUÊ
                                </button>
                            </div>
                        </div>
                    </form>

                    <div class="content-detail shadow-lg p-3 mb-5 bg-body-tertiary rounded">
                        <div class="line-page"></div>
                        <div class="info-car-desc" id="outsfeatures">
                            <h6>Đặc điểm</h6>
                            <div class="outstanding-features">
                                <div class="outstanding-features__item">
                                    <div class="title">
                                        <p class="sub">Loại Xe</p>
                                        <p class="main">@Model.Type</p>
                                    </div>
                                </div>
                                <div class="outstanding-features__item">
                                    <div class="title">
                                        <p class="sub">Thương Hiệu</p>
                                        <p class="main">@Model.Brand</p>
                                    </div>
                                </div>
                                <div class="outstanding-features__item">
                                    <div class="title">
                                        <p class="sub">Giá</p>
                                        @{
                                            string convertmoney = string.Format(new CultureInfo("vi-VN"), "{0:#,##0}",
                                            Model.RentPrice);
                                        }
                                        <p class="main"> @convertmoney VNĐ/Giờ</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="line-page"></div>
                        <div class="info-car-desc">
                            <h6>Mô tả</h6>
                            <pre
                                class="">@Model.Name xe số tự động , có camera hành trình , có youtube mp3 , dung lượng data 1G/ ngày,xe đăng ký thắng 04/2022, xe gia đình sạch sẽ khử khuẩn thường xuyên , momg mọi người vì sức khoẻ cộng đồng không hút thuốc trên xe , xin cảm ơn tất cả khách hàng mến thương</pre>
                        </div>
                    </div>
                </div>
            </div>
            <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
                integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
                crossorigin="anonymous"></script>
        </div>
    </div>
    <script src="~/js/Rent.js"></script>
    <script>
        function calculateTimeDifference() {
            // Lấy giá trị thời gian từ các trường datetime-local
            const party1Value = document.getElementById("party1").value;
            const party2Value = document.getElementById("party2").value;
            // Chuyển đổi giá trị thành đối tượng Date
            const date1 = new Date(party1Value);
            const date2 = new Date(party2Value);
            const timeDifferenceElement = document.getElementById("timeDifference");
            if (date1 > date2) {
                alert("Ngày không hợp lệ");
                timeDifferenceElement.textContent = '';
                return;
            }
            // Tính toán khoảng cách thời gian
            const timeDifference = Math.abs(date2 - date1);

            // Chuyển đổi khoảng cách thời gian thành chuỗi có định dạng phù hợp
            const hoursDifference = Math.floor(timeDifference / (1000 * 60 * 60));
            const minutesDifference = Math.floor((timeDifference % (1000 * 60 * 60)) / (1000 * 60));

            // Hiển thị khoảng cách thời gian trên thẻ p
            timeDifferenceElement.textContent = `Thời gian thuê là ${hoursDifference} giờ và ${minutesDifference} phút.`;
            var costText = document.querySelector('.finalcost').textContent;
            const RentPrice = @Model.RentPrice;
            console.log('Rent price: ' + RentPrice);
            const price = (hoursDifference * RentPrice) + (minutesDifference / 60 * RentPrice);
            console.log('Price: ' + price);
            document.querySelector('.finalcost').textContent = price.toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g, ".").toString() + " VNĐ";
            document.getElementById('totalpriceInput').value = price.toString();
        }
    </script>
</body>

</html>
